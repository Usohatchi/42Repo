<!DOCTYPE html>

<html>
    
<head>
    <meta charset="utf-8">
    <title></title>
    <style>
        #image-header{
            background: url(<%= @project.image_link %>) no-repeat fixed center;
            background-size: contain;
            width: 100%;
            height: 100vh;
            margin: 0;
            text-align:center;
            position: relative;
        }
    </style>
    <script>
        
        function showText(){
            document.getElementById("hidden-text").style.opacity = "1";
            document.getElementById("scroll-down").style.opacity = "1";
            document.getElementById("show-text").style.opacity = "0";
            document.getElementById("border1").style.width = "20%";
            document.getElementById("border2").style.width = "92%";
            document.getElementById("border3").style.width = "75%";
        }

        function hideText(){
            document.getElementById("hidden-text").style.opacity = "0";
            document.getElementById("show-text").style.opacity = "0.3";
            document.getElementById("scroll-down").style.opacity = "0.3";
            document.getElementById("border1").style.width = "0%";
            document.getElementById("border2").style.width = "0%";
            document.getElementById("border3").style.width = "0%";
        }

        document.body.addEventListener("click", function(e) {
            var target = e.target || e.srcElement;
            var content_area1 = document.getElementsByClassName("body-holder")[0];
            var content_area2 = document.getElementById("show-text");

              
            if (target !== content_area1 && !isChildOf(target, content_area1) && target !== content_area2 && !isChildOf(target, content_area2)){
                hideText();
            }
        }, false);

        function isChildOf(child, parent) {
          if (child.parentNode === parent) {
            return true;
          } else if (child.parentNode === null) {
            return false;
          } else {
            return isChildOf(child.parentNode, parent);
          }
        }

    </script>
</head>
<body>
    <div id="main">
        <ul class="nav-bar2">
            <li style="float: left; border: none;" class="nav-bar-links"><%= link_to '42', projects_path, :class => "nav-link" %></li>
            <li class="nav-bar-links"><%= link_to "Back", projects_path, :class => "nav-link" %></li>
            <li class="nav-bar-links"><%= link_to 'Edit', edit_project_path(@project), :class => "nav-link" %></li>
            <li class="nav-bar-links"><%= link_to "Delete", project_path(@project), :method => "delete", :class => "nav-link", data: { confirm: 'Are you sure?' }%></li>
        </ul>
        <div>
            <header id="image-header">
                <div id="hidden-text">
                    <div class="body-holder">
                        <div class="body">
                            <h1 class="title">Photographer: <%= @project.photographer %><br><div id="border2"></div></h1>
                            <h2 class="title2">$ <%= @project.price %><br><div id="border3"></div></h2>
                            <div class="text">
                                <%= @project.text %>
                            </div>
                        </div>
                    </div>
                    <h1 class="img-text">
                         <%= @project.title %>
                         <div id="border1"></div>
                    </h1>
                </div>
                <a href="#page2">
                    <div id="scroll-down">
                        <img id="down-arrow" src=<%= image_url("down_arrow.png") %> alt="down-arrow" >
                    </div>
                </a>
                <div id="show-text" onclick="showText()">
                    <div id="show-text-background" class="background" ></div>
                    <img id="show-text-id" src=<%= image_url("plus-xxl.png") %> alt="plus">
                </div>
            </header>
        </div>
        <div id="page2">
            <div>
                <h1 id="page2-title">Text</h1>
            </div>
        </div>
    </div>
</body>

</html>
<div id="copyright">&copy; 2017 Eamon Ito-Fisher</div>